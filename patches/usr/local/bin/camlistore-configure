#!/bin/bash

if test "$#" -ne 2; then
    echo "usage: camlistore-configure username password # credentials to access Camlistore's web UI"
	exit 1
fi

confFile="/home/camli/.config/camlistore/server-config.json"

sed -i -e 's#"auth":\ "localhost",#"auth": "userpass:'$1:$2'",#' $confFile
sed -i -e 's#"kvIndexFile":\ "/home/camli/var/camlistore/camli-index.kvdb",#"mysql": "root@localhost:3306:",#' $confFile
sed -i -e 's#"dbNames":\ null#"dbNames": {\n\t\t"queue-sync-to-index": "sync_index_queue",\n\t\t"ui_thumbcache": "ui_thumbmeta_cache",\n\t\t"blobpacked_index": "blobpacked_index"\n\t},\n\t"https": true,\n\t"packRelated": true#' $confFile

exit 0
